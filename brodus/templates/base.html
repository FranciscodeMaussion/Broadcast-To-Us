<!DOCTYPE html>
{% load staticfiles %}
<html>
    <head>
        <meta charset='utf-8'>
        <link type="text/css" rel="stylesheet" href="{% static 'css/materialize.css' %}"  media="screen,projection"/>
        <link type="text/css" rel="stylesheet" href="{% static 'css/font-awesome.css' %}" />
        <link rel="stylesheet" href="{% static 'css/my_style.css' %}">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="icon" href="{% static 'img/broad_logo.png' %}" type="image/x-icon">
        {% block titulo %}
        {% endblock %}
    </head>
    <body>
        <header>
            <nav role="navigation">
                <div class="nav-wrapper">
                    <div class="container">
                        <a class="hide-on-med-and-down" href="{% url 'brodus:index' %}"><img src="{% static 'img/broad_b.png' %}" height="50em" width="50em" style="margin-top:0.35em"></a>
                        <a href="{% url 'brodus:index' %}" class="brand-logo" style="font-size:1.5em;">&nbsp; BroadUs</a>
                        <ul class="right hide-on-med-and-down">
                            {% if rol_user.su %}
                            <li ><a class="tooltipped modal-trigger waves-effect waves-light " data-position="bottom" data-delay="50" data-tooltip="Añadir Idioma"  href="#idioma_modal"><i class='fa fa-globe fa-1-5x'></i></a></li>
                            <li ><a class="tooltipped modal-trigger waves-effect waves-light " data-position="bottom" data-delay="50" data-tooltip="Añadir Lenguaje" href="#lenguaje_modal"><i class='fa fa-terminal fa-1-5x'></i></a></li>
                            <li ><a class="tooltipped modal-trigger waves-effect waves-light " data-position="bottom" data-delay="50" data-tooltip="Añadir Trabajo" href="#trabajo_modal"><i class='fa fa-briefcase fa-1-5x'></i></a></li>
                            {% endif %}
                            {% if user.is_authenticated %}
                            <li ><a class="tooltipped" data-position="bottom" data-delay="50" href="{% url 'brodus:new_proy' %}" data-tooltip="Nuevo Proyecto"><i class='fa fa-plus fa-1-5x'></i></a></li>
                            <li ><a class="tooltipped" data-position="bottom" data-delay="50" href="{% url 'brodus:log_out' %}" data-tooltip="Log_out"><i class='fa fa-sign-out fa-1-5x'></i></a></li>
                            {% else %}
                            <li ><a class="tooltipped" data-position="bottom" data-delay="50" href="{% url 'brodus:log_in' %}" data-tooltip="Log_in"><i class='fa fa-sign-in fa-1-5x'></i></a></li>
                            {% endif %}
                        </ul>
                        <ul class="side-nav" style="right: -250px;" id="mobile-demo">
                            {% if rol_user.su %}
                            <li><a class="modal-trigger" href="#idioma_modal"><i class='fa fa-globe fa-fw'></i>&nbsp; Idioma</a></li>
                            <li><a class="modal-trigger" href="#lenguaje_modal"><i class='fa fa-terminal fa-fw'></i>&nbsp; Lenguaje</a></li>
                            <li><a class="modal-trigger" href="#trabajo_modal"><i class='fa fa-briefcase fa-fw'></i>&nbsp; Trabajo</a></li>
                            {% endif %}
                            {% if user.is_authenticated %}
                            <li><a href="{% url 'brodus:log_out' %}"><i class='fa fa-sign-out fa-fw'></i>&nbsp; Log-out</a></li>
                            {% else %}
                            <li><a href="{% url 'brodus:log_in' %}"><i class='fa fa-sign-in fa-fw'></i>&nbsp; Log-in</a></li>
                            {% endif %}
                        </ul>
                        <a class="waves-effect circle button-collapse" href="#" data-activates="mobile-demo"><i class="fa fa-bars"></i></a>
                    </div>
                </div>
            </nav>
            <div id="idioma_modal" class="modal">
                <form action="{% url 'brodus:add_idioma' %}" method="POST" enctype="multipart/form-data" id="add_idioma">
                    {% csrf_token %}
                    <div class="modal-content">
                        <div class="input-field">
                            <input maxlength="30" name="nombre_idioma" id="nombre_idioma" type="text" value="">
                            <label for="nombre_idioma">Nombre del Idioma</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a onclick="send_me('idioma')" class=" modal-action modal-close waves-effect btn-flat">Agregar</a>
                        <a href="#!" class=" modal-action modal-close waves-effect btn-flat">Cancelar</a>
                    </div>
                </form>
            </div>
            <div id="lenguaje_modal" class="modal">
                <form action="{% url 'brodus:add_lenguaje' %}" method="POST" enctype="multipart/form-data" id="add_lenguaje">
                    {% csrf_token %}
                    <div class="modal-content">
                        <div class="input-field">
                            <input maxlength="30" name="nombre_lenguaje" id="nombre_lenguaje" type="text" value="">
                            <label for="nombre_lenguaje">Nombre del Lenguaje</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a href="#!" onclick="send_me('lenguaje')" class=" modal-action modal-close waves-effect btn-flat">Agregar</a>
                        <a href="#!" class=" modal-action modal-close waves-effect btn-flat">Cancelar</a>
                    </div>
                </form>
            </div>
            <div id="trabajo_modal" class="modal">
                <form action="{% url 'brodus:add_trabajo' %}" method="POST" enctype="multipart/form-data" id="add_trabajo">
                    {% csrf_token %}
                    <div class="modal-content">
                        <div class="modal-content">
                            <div class="input-field">
                                <input maxlength="30" name="nombre_trabajo" id="nombre_trabajo" type="text" value="">
                                <label for="nombre_trabajo">Nombre del Trabajo</label>
                            </div>
                            <div class="input-field">
                                <textarea id="desc_trabajo" name="desc_trabajo" class="materialize-textarea"></textarea>
                                <label for="desc_trabajo">Descripción del trabajo</label>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a href="#!" onclick="send_me('trabajo')" class=" modal-action modal-close waves-effect btn-flat">Agregar</a>
                        <a href="#!" class=" modal-action modal-close waves-effect btn-flat">Cancelar</a>
                    </div>
                </form>
            </div>
        </header>
        <main>
            {% block content %}
            {% endblock %}
        </main>
        <footer class="page-footer site-footer">
            <div class="container">
                <div class="row">
                    <div class="col l6 s12">
                        <h5>BroadUs</h5>
                        <p>No hace falta buscarnos</p>
                    </div>
                    <div class="col l4 offset-l2 s12">
                        <h5 style="font-size:1.18em">Links</h5>
                        <ul>
                            <li><a href="https://github.com/frandemo/Broadcast-To-Us" style="font-size:0.75em">Github</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-copyright">
                <div class="container">
                    © 2015 demo
                </div>
            </div>
        </footer>
    </body>
    <script src="{% static 'js/jquery-1.11.3.min.js' %}" type="text/javascript"></script>
    <script type="text/javascript" src="{% static 'js/materialize.js' %}"></script>
    <script>
        $(".button-collapse").sideNav();
        $(document).ready(function(){
            $('.tooltipped').tooltip({delay: 50});
            $('select').material_select();
            $('.modal-trigger').leanModal();
        });
        function send_me(f){
            if($('input:text[name=nombre_'+f+']').val()!=""){
                /*$( '#add_'+f ).submit();*/
                var formData = $( '#add_'+f ).serialize();
                $.ajax({
                    type: 'POST',
                    url: $( '#add_'+f ).attr('action'),
                    data: formData,
                    statusCode: {
                        202: function(){
                            Materialize.toast('Se agrego correctamente el nuevo '+f, 2000);
                            $( '#nombre_'+f ).val('')
                            if ( f=='trabajo' ){
                                $( '#desc_'+f ).val('')
                            }
                        },
                    },
                });
            }else{
                Materialize.toast('Verifique los campos', 2000);
            }
        }
    </script>
    {% block scripts %}
    {% endblock %}
</html>
